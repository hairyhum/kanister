<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Functions | Kanister</title>
    <meta name="description" content="Application-Specific Data Management">
    <meta name="generator" content="VitePress v1.0.0-rc.40">
    <link rel="preload stylesheet" href="/assets/style.CMhOXGiz.css" as="style">
    
    <script type="module" src="/assets/app.P7Wbr2kX.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.CiLzNYv1.js">
    <link rel="modulepreload" href="/assets/chunks/theme.03xzBKd0.js">
    <link rel="modulepreload" href="/assets/functions.md.BkCdMtsG.lean.js">
    <link rel="icon" href="favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-be30fe8f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-dbd958af></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-dbd958af> Skip to content </a><!--]--><!----><header class="VPNav" data-v-be30fe8f data-v-9d33764e><div class="VPNavBar has-sidebar" data-v-9d33764e data-v-9af6ad0e><div class="wrapper" data-v-9af6ad0e><div class="container" data-v-9af6ad0e><div class="title" data-v-9af6ad0e><div class="VPNavBarTitle has-sidebar" data-v-9af6ad0e data-v-b490fd71><a class="title" href="/" data-v-b490fd71><!--[--><!--]--><!--[--><img class="VPImage logo" src="kanister.svg" alt data-v-c06ec1db><!--]--><!--[-->Kanister<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-9af6ad0e><div class="content-body" data-v-9af6ad0e><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9af6ad0e><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9af6ad0e data-v-a20f2e0b><span id="main-nav-aria-label" class="visually-hidden" data-v-a20f2e0b>Main Navigation</span><!--[--><!--[--><span class="VPLink VPNavBarMenuLink" tabindex="0" data-v-a20f2e0b data-v-26ef0802><!--[--><span data-v-26ef0802>0.110.0</span><!--]--></span><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9af6ad0e data-v-34436951><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-34436951 data-v-aceb99e9 data-v-59a1aff1><span class="check" data-v-59a1aff1><span class="icon" data-v-59a1aff1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-aceb99e9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-aceb99e9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9af6ad0e data-v-d987168e data-v-b24637dc><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kanisterio/kanister" aria-label="github" target="_blank" rel="noopener" data-v-b24637dc data-v-91887f2d><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9af6ad0e data-v-1ffa50d0 data-v-1a07a9c9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1a07a9c9><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-1a07a9c9><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-1a07a9c9><div class="VPMenu" data-v-1a07a9c9 data-v-c14f2bb5><!----><!--[--><!--[--><!----><div class="group" data-v-1ffa50d0><div class="item appearance" data-v-1ffa50d0><p class="label" data-v-1ffa50d0>Appearance</p><div class="appearance-action" data-v-1ffa50d0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-1ffa50d0 data-v-aceb99e9 data-v-59a1aff1><span class="check" data-v-59a1aff1><span class="icon" data-v-59a1aff1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-aceb99e9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-aceb99e9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-1ffa50d0><div class="item social-links" data-v-1ffa50d0><div class="VPSocialLinks social-links-list" data-v-1ffa50d0 data-v-b24637dc><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kanisterio/kanister" aria-label="github" target="_blank" rel="noopener" data-v-b24637dc data-v-91887f2d><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9af6ad0e data-v-697edc32><span class="container" data-v-697edc32><span class="top" data-v-697edc32></span><span class="middle" data-v-697edc32></span><span class="bottom" data-v-697edc32></span></span></button></div></div></div></div><div class="divider" data-v-9af6ad0e><div class="divider-line" data-v-9af6ad0e></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-be30fe8f data-v-d7fee107><div class="container" data-v-d7fee107><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d7fee107><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-d7fee107><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-d7fee107>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-d7fee107 data-v-042d2c29><button data-v-042d2c29>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-be30fe8f data-v-11ddc2cc><div class="curtain" data-v-11ddc2cc></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-11ddc2cc><span class="visually-hidden" id="sidebar-aria-label" data-v-11ddc2cc> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-11ddc2cc><section class="VPSidebarItem level-0 has-active" data-v-11ddc2cc data-v-cefe3a0a><!----><div class="items" data-v-cefe3a0a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/overview.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/install.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Installation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tutorial.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Tutorial</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/architecture.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Architecture</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tooling.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Tooling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/functions.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Functions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/templates.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Template Parameters</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/troubleshooting.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Troubleshooting</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-11ddc2cc><section class="VPSidebarItem level-0" data-v-11ddc2cc data-v-cefe3a0a><div class="item" role="button" tabindex="0" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><h2 class="text" data-v-cefe3a0a>Tasks</h2><!----></div><div class="items" data-v-cefe3a0a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tasks/argo.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Automating ActionSet Creation using Argo Cron Workflows</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tasks/logs.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Segregate Controller And Datapath Logs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tasks/logs_level.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Modifying Kanister Log Level</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tasks/logs_labels.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Configuring logs for specific ActionSets</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-cefe3a0a data-v-cefe3a0a><div class="item" data-v-cefe3a0a><div class="indicator" data-v-cefe3a0a></div><a class="VPLink link link" href="/tasks/scaleworkload.html" data-v-cefe3a0a><!--[--><p class="text" data-v-cefe3a0a>Using ScaleWorkload function with output artifact</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-be30fe8f data-v-126d408c><div class="VPDoc has-sidebar has-aside" data-v-126d408c data-v-52e7dc14><!--[--><!--]--><div class="container" data-v-52e7dc14><div class="aside" data-v-52e7dc14><div class="aside-curtain" data-v-52e7dc14></div><div class="aside-container" data-v-52e7dc14><div class="aside-content" data-v-52e7dc14><div class="VPDocAside" data-v-52e7dc14 data-v-1d88473e><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-1d88473e data-v-5ab9d1cd><div class="content" data-v-5ab9d1cd><div class="outline-marker" data-v-5ab9d1cd></div><div class="outline-title" role="heading" aria-level="2" data-v-5ab9d1cd>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-5ab9d1cd><span class="visually-hidden" id="doc-outline-aria-label" data-v-5ab9d1cd> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-5ab9d1cd data-v-cb89e7b0><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-1d88473e></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-52e7dc14><div class="content-container" data-v-52e7dc14><!--[--><!--]--><main class="main" data-v-52e7dc14><div style="position:relative;" class="vp-doc _functions" data-v-52e7dc14><div><h1 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to &quot;Functions&quot;">​</a></h1><p>Kanister Functions are written in go and are compiled when building the controller. They are referenced by Blueprints phases. A Kanister Function implements the following go interface:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Func allows custom actions to be executed.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Func</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    RequiredArgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Kanister Functions are registered by the return value of <code>Name()</code>, which must be static.</p><p>Each phase in a Blueprint executes a Kanister Function. The <code>Func</code> field in a <code>BlueprintPhase</code> is used to lookup a Kanister Function. After <code>BlueprintPhase.Args</code> are rendered, they are passed into the Kanister Function&#39;s <code>Exec()</code> method.</p><p>The <code>RequiredArgs</code> method returns the list of argument names that are required. And <code>Arguments</code> method returns the list of all the argument names that are supported by the function.</p><h2 id="existing-functions" tabindex="-1">Existing Functions <a class="header-anchor" href="#existing-functions" aria-label="Permalink to &quot;Existing Functions&quot;">​</a></h2><p>The Kanister controller ships with the following Kanister Functions out-of-the-box that provide integration with Kubernetes:</p><h3 id="kubeexec" tabindex="-1">KubeExec <a class="header-anchor" href="#kubeexec" aria-label="Permalink to &quot;KubeExec&quot;">​</a></h3><p>KubeExec is similar to running</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec -it --namespace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NAMESPAC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CONTAINE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [CMD </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">LIST...]</span></span></code></pre></div><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>pod</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the pod in which to execute</td></tr><tr><td>container</td><td style="text-align:center;">No</td><td>string</td><td>(required if pod contains more than 1 container) name of the container in which to execute</td></tr><tr><td>command</td><td style="text-align:center;">Yes</td><td>[]string</td><td>command list to execute</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">KubeExec</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">examplePhase</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    pod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ index .Deployment.Pods 0 }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kanister-sidecar</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        echo &quot;Example&quot;</span></span></code></pre></div><h3 id="kubeexecall" tabindex="-1">KubeExecAll <a class="header-anchor" href="#kubeexecall" aria-label="Permalink to &quot;KubeExecAll&quot;">​</a></h3><p>KubeExecAll is similar to running KubeExec on specified containers of given pods (all specified containers on given pods) in parallel. In the below example, the command is going to be executed in both the containers of the given pods.</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>pods</td><td style="text-align:center;">Yes</td><td>string</td><td>space separated list of names of pods in which to execute</td></tr><tr><td>containers</td><td style="text-align:center;">Yes</td><td>string</td><td>space separated list of names of the containers in which to execute</td></tr><tr><td>command</td><td style="text-align:center;">Yes</td><td>[]string</td><td>command list to execute</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">KubeExecAll</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">examplePhase</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    pods</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ index .Deployment.Pods 0 }} {{ index .Deployment.Pods 1 }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    containers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;container1 container2&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        echo &quot;Example&quot;</span></span></code></pre></div><h3 id="kubetask" tabindex="-1">KubeTask <a class="header-anchor" href="#kubetask" aria-label="Permalink to &quot;KubeTask&quot;">​</a></h3><p>KubeTask spins up a new container and executes a command via a Pod. This allows you to run a new Pod from a Blueprint.</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">No</td><td>string</td><td>namespace in which to execute (the pod will be created in controller&#39;s namespace if not specified)</td></tr><tr><td>image</td><td style="text-align:center;">Yes</td><td>string</td><td>image to be used for executing the task</td></tr><tr><td>command</td><td style="text-align:center;">Yes</td><td>[]string</td><td>command list to execute</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">KubeTask</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">examplePhase</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">busybox</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podOverride</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      containers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">container</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        echo &quot;Example&quot;</span></span></code></pre></div><h3 id="scaleworkload" tabindex="-1">ScaleWorkload <a class="header-anchor" href="#scaleworkload" aria-label="Permalink to &quot;ScaleWorkload&quot;">​</a></h3><p>ScaleWorkload is used to scale up or scale down a Kubernetes workload. It also sets the original replica count of the workload as output artifact with the key <code>originalReplicaCount</code>. The function only returns after the desired replica state is achieved:</p><ul><li>When reducing the replica count, wait until all terminating pods complete.</li><li>When increasing the replica count, wait until all pods are ready.</li></ul><p>Currently the function supports Deployments, StatefulSets and DeploymentConfigs.</p><p>It is similar to running</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scale deployment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DEPLOYMENT-NAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --replicas=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NUMBER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OF REPLICA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">S</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NAMESPAC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>This can be useful if the workload needs to be shutdown before processing certain data operations. For example, it may be useful to use <code>ScaleWorkload</code> to stop a database process before restoring files. See <a href="./tasks/scaleworkload.html">Using ScaleWorkload function with output artifact</a> for an example with new <code>ScaleWorkload</code> function.</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">No</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>name</td><td style="text-align:center;">No</td><td>string</td><td>name of the workload to scale</td></tr><tr><td>kind</td><td style="text-align:center;">No</td><td>string</td><td>[deployment] or [statefulset]</td></tr><tr><td>replicas</td><td style="text-align:center;">Yes</td><td>int</td><td>The desired number of replicas</td></tr><tr><td>waitForReady</td><td style="text-align:center;">No</td><td>bool</td><td>Whether to wait for the workload to be ready before executing next steps. Default Value is <code>true</code></td></tr></tbody></table><p>Example of scaling down:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ScaleWorkload</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">examplePhase</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span></code></pre></div><p>Example of scaling up:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ScaleWorkload</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">examplePhase</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    waitForReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><h3 id="preparedata" tabindex="-1">PrepareData <a class="header-anchor" href="#preparedata" aria-label="Permalink to &quot;PrepareData&quot;">​</a></h3><p>This function allows running a new Pod that will mount one or more PVCs and execute a command or script that manipulates the data on the PVCs.</p><p>The function can be useful when it is necessary to perform operations on the data volumes that are used by one or more application containers. The typical sequence is to stop the application using ScaleWorkload, perform the data manipulation using PrepareData, and then restart the application using ScaleWorkload.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is extremely important that, if PrepareData modifies the underlying data, the PVCs must not be currently in use by an active application container (ensure by using ScaleWorkload with replicas=0 first). For advanced use cases, it is possible to have concurrent access but the PV needs to have RWX mode enabled and the volume needs to use a clustered file system that supports concurrent access.</p></div><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>image</td><td style="text-align:center;">Yes</td><td>string</td><td>image to be used the command</td></tr><tr><td>volumes</td><td style="text-align:center;">No</td><td>map[string]string</td><td>Mapping of <code>pvcName</code> to <code>mountPath</code> under which the volume will be available</td></tr><tr><td>command</td><td style="text-align:center;">Yes</td><td>[]string</td><td>command list to execute</td></tr><tr><td>serviceaccount</td><td style="text-align:center;">No</td><td>string</td><td>service account info</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The <code>volumes</code> argument does not support <code>subPath</code> mounts so the data manipulation logic needs to be aware of any <code>subPath</code> mounts that may have been used when mounting a PVC in the primary application container. If <code>volumes</code> argument is not specified, all volumes belonging to the protected object will be mounted at the predefined path <code>/mnt/prepare_data/&lt;pvcName&gt;</code></p></div><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ScaleWorkload</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ShutdownApplication</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PrepareData</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ManipulateData</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">busybox</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      application-pvc-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/data&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      application-pvc-2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/restore-data&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-c</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        cp /restore-data/file_to_replace.data /data/file.data</span></span></code></pre></div><h3 id="backupdata" tabindex="-1">BackupData <a class="header-anchor" href="#backupdata" aria-label="Permalink to &quot;BackupData&quot;">​</a></h3><p>This function backs up data from a container into any object store supported by Kanister.</p><div class="tip custom-block"><p class="custom-block-title">WARNING</p><p>The <em>BackupData</em> will be deprecated soon. We recommend using <a href="#copyvolumedata">CopyVolumeData</a> instead. However, <a href="#restoredata">RestoreData</a> and <a href="#deletedata">DeleteData</a> will continue to be available, ensuring you retain control over your existing backups.</p></div><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is important that the application includes a <code>kanister-tools</code> sidecar container. This sidecar is necessary to run the tools that capture path on a volume and store it on the object store.</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>pod</td><td style="text-align:center;">Yes</td><td>string</td><td>pod in which to execute</td></tr><tr><td>container</td><td style="text-align:center;">Yes</td><td>string</td><td>container in which to execute</td></tr><tr><td>includePath</td><td style="text-align:center;">Yes</td><td>string</td><td>path of the data to be backed up</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to store the backup on the object store</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used for backups</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>backupTag</td><td>string</td><td>unique tag added to the backup</td></tr><tr><td>backupID</td><td>string</td><td>unique snapshot id generated during backup</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.BackupToObjectStore.Output.backupTag }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupData</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupToObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          pod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ index .Deployment.Pods 0 }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kanister-tools</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          includePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/mnt/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3-bucket/path/artifactPrefix</span></span></code></pre></div><h3 id="backupdataall" tabindex="-1">BackupDataAll <a class="header-anchor" href="#backupdataall" aria-label="Permalink to &quot;BackupDataAll&quot;">​</a></h3><p>This function concurrently backs up data from one or more pods into an any object store supported by Kanister.</p><div class="tip custom-block"><p class="custom-block-title">WARNING</p><p>The <em>BackupDataAll</em> will be deprecated soon. However, <a href="#restoredataall">RestoreDataAll</a> and <a href="#deletedataall">DeleteDataAll</a> will continue to be available, ensuring you retain control over your existing backups.</p></div><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is important that the application includes a <code>kanister-tools</code> sidecar container. This sidecar is necessary to run the tools that capture path on a volume and store it on the object store.</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>pods</td><td style="text-align:center;">No</td><td>string</td><td>pods in which to execute (by default runs on all the pods)</td></tr><tr><td>container</td><td style="text-align:center;">Yes</td><td>string</td><td>container in which to execute</td></tr><tr><td>includePath</td><td style="text-align:center;">Yes</td><td>string</td><td>path of the data to be backed up</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to store the backup on the object store appended by pod name later</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used for backups</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>BackupAllInfo</td><td>string</td><td>info about backup tag and identifier required for restore</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.backupToObjectStore.Output.BackupAllInfo }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupDataAll</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupToObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kanister-tools</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          includePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/mnt/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3-bucket/path/artifactPrefix</span></span></code></pre></div><h3 id="restoredata" tabindex="-1">RestoreData <a class="header-anchor" href="#restoredata" aria-label="Permalink to &quot;RestoreData&quot;">​</a></h3><p>This function restores data backed up by the <a href="#backupdata">BackupData</a> function. It creates a new Pod that mounts the PVCs referenced by the specified Pod and restores data to the specified path.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is extremely important that, the PVCs are not be currently in use by an active application container, as they are required to be mounted to the new Pod (ensure by using ScaleWorkload with replicas=0 first). For advanced use cases, it is possible to have concurrent access but the PV needs to have RWX mode enabled and the volume needs to use a clustered file system that supports concurrent access.</p></div><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>image</td><td style="text-align:center;">Yes</td><td>string</td><td>image to be used for running restore</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to the backup on the object store</td></tr><tr><td>backupIdentifier</td><td style="text-align:center;">No</td><td>string</td><td>(required if backupTag not provided) unique snapshot id generated during backup</td></tr><tr><td>backupTag</td><td style="text-align:center;">No</td><td>string</td><td>(required if backupIdentifier not provided) unique tag added during the backup</td></tr><tr><td>restorePath</td><td style="text-align:center;">No</td><td>string</td><td>path where data is restored</td></tr><tr><td>pod</td><td style="text-align:center;">No</td><td>string</td><td>pod to which the volumes are attached</td></tr><tr><td>volumes</td><td style="text-align:center;">No</td><td>map[string]string</td><td>Mapping of [pvcName] to [mountPath] under which the volume will be available</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used during backups</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The <code>image</code> argument requires the use of <code>ghcr.io/kanisterio/kanister-tools</code> image since it includes the required tools to restore data from the object store. Between the <code>pod</code> and <code>volumes</code> arguments, exactly one argument must be specified.</p></div><p>Example:</p><p>Consider a scenario where you wish to restore the data backed up by the <a href="#backupdata">BackupData</a> function. We will first scale down the application, restore the data and then scale it back up. For this phase, we will use the <code>backupInfo</code> Artifact provided by backup function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ScaleWorkload name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ShutdownApplication args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Name }}\&quot; kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    Deployment replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">RestoreData name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">RestoreFromObjectStore args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; pod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{ index .Deployment.Pods 0 }}\&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ghcr.io/kanisterio/kanister-tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    s3-bucket/path/artifactPrefix backupTag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .ArtifactsIn.backupInfo.KeyValue.backupIdentifier }}\&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ScaleWorkload name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">StartupApplication args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Name }}\&quot; kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    Deployment replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span></code></pre></div><h3 id="restoredataall" tabindex="-1">RestoreDataAll <a class="header-anchor" href="#restoredataall" aria-label="Permalink to &quot;RestoreDataAll&quot;">​</a></h3><p>This function concurrently restores data backed up by the <a href="#backupdataall">BackupDataAll</a> function, on one or more pods. It concurrently runs a job Pod for each workload Pod, that mounts the respective PVCs and restores data to the specified path.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is extremely important that, the PVCs are not be currently in use by an active application container, as they are required to be mounted to the new Pod (ensure by using ScaleWorkload with replicas=0 first). For advanced use cases, it is possible to have concurrent access but the PV needs to have RWX mode enabled and the volume needs to use a clustered file system that supports concurrent access.</p></div><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>image</td><td style="text-align:center;">Yes</td><td>string</td><td>image to be used for running restore</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to the backup on the object store</td></tr><tr><td>restorePath</td><td style="text-align:center;">No</td><td>string</td><td>path where data is restored</td></tr><tr><td>pods</td><td style="text-align:center;">No</td><td>string</td><td>pods to which the volumes are attached</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used during backups</td></tr><tr><td>backupInfo</td><td style="text-align:center;">Yes</td><td>string</td><td>snapshot info generated as output in BackupDataAll function</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The <em>image</em> argument requires the use of [ghcr.io/kanisterio/kanister-tools] image since it includes the required tools to restore data from the object store. Between the <em>pod</em> and <em>volumes</em> arguments, exactly one argument must be specified.</p></div><p>Example:</p><p>Consider a scenario where you wish to restore the data backed up by the <a href="#backupdataall">BackupDataAll</a> function. We will first scale down the application, restore the data and then scale it back up. We will not specify <code>pods</code> in args, so this function will restore data on all pods concurrently. For this phase, we will use the <code>params</code> Artifact provided by BackupDataAll function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ScaleWorkload name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ShutdownApplication args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Name }}\&quot; kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    Deployment replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">RestoreDataAll name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">RestoreFromObjectStore args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    \&quot;{{ .Deployment.Namespace }}\&quot; image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ghcr.io/kanisterio/kanister-tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    s3-bucket/path/artifactPrefix backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .ArtifactsIn.params.KeyValue.backupInfo }}\&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ScaleWorkload name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">StartupApplication args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Name }}\&quot; kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    Deployment replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span></code></pre></div><h3 id="copyvolumedata" tabindex="-1">CopyVolumeData <a class="header-anchor" href="#copyvolumedata" aria-label="Permalink to &quot;CopyVolumeData&quot;">​</a></h3><p>This function copies data from the specified volume (referenced by a Kubernetes PersistentVolumeClaim) into an object store. This data can be restored into a volume using the <code>restoredata</code>{.interpreted-text role=&quot;ref&quot;} function</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The PVC must not be in-use (attached to a running Pod)</p><p>If data needs to be copied from a running workload without stopping it, use the <a href="#backupdata">BackupData</a> function</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace the source PVC is in</td></tr><tr><td>volume</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the source PVC</td></tr><tr><td>dataArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path on the object store to store the data in</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used during backups</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>backupID</td><td>string</td><td>unique snapshot id generated when data was copied</td></tr><tr><td>backupRoot</td><td>string</td><td>parent directory location of the data copied from</td></tr><tr><td>backupArtifactLocation</td><td>string</td><td>location in objectstore where data was copied</td></tr><tr><td>backupTag</td><td>string</td><td>unique string to identify this data copy</td></tr></tbody></table><p>Example:</p><p>If the ActionSet <code>Object</code> is a PersistentVolumeClaim:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CopyVolumeData</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .PVC.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .PVC.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dataArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3-bucket-name/path</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="deletedata" tabindex="-1">DeleteData <a class="header-anchor" href="#deletedata" aria-label="Permalink to &quot;DeleteData&quot;">​</a></h3><p>This function deletes the snapshot data backed up by the <a href="#backupdata">BackupData</a> function.</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to the backup on the object store</td></tr><tr><td>backupID</td><td style="text-align:center;">No</td><td>string</td><td>(required if backupTag not provided) unique snapshot id generated during backup</td></tr><tr><td>backupTag</td><td style="text-align:center;">No</td><td>string</td><td>(required if backupID not provided) unique tag added during the backup</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used during backups</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><p>Example:</p><p>Consider a scenario where you wish to delete the data backed up by the <a href="#backupdata">BackupData</a> function. For this phase, we will use the <code>backupInfo</code> Artifact provided by backup function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteData</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteFromObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3-bucket/path/artifactPrefix</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    backupTag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.backupIdentifier }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="deletedataall" tabindex="-1">DeleteDataAll <a class="header-anchor" href="#deletedataall" aria-label="Permalink to &quot;DeleteDataAll&quot;">​</a></h3><p>This function concurrently deletes the snapshot data backed up by the BackupDataAll function.</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to the backup on the object store</td></tr><tr><td>backupInfo</td><td style="text-align:center;">Yes</td><td>string</td><td>snapshot info generated as output in BackupDataAll function</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used during backups</td></tr><tr><td>reclaimSpace</td><td style="text-align:center;">No</td><td>bool</td><td>provides a way to specify if space should be reclaimed</td></tr><tr><td>insecureTLS</td><td style="text-align:center;">No</td><td>bool</td><td>enables insecure connection for data mover</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><p>Example:</p><p>Consider a scenario where you wish to delete all the data backed up by the <a href="#backupdataall">BackupDataAll</a> function. For this phase, we will use the <code>params</code> Artifact provided by backup function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteDataAll</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteFromObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3-bucket/path/artifactPrefix</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.params.KeyValue.backupInfo }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    reclaimSpace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="locationdelete" tabindex="-1">LocationDelete <a class="header-anchor" href="#locationdelete" aria-label="Permalink to &quot;LocationDelete&quot;">​</a></h3><p>This function uses a new Pod to delete the specified artifact from an object store.</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>artifact</td><td style="text-align:center;">Yes</td><td>string</td><td>artifact to be deleted from the object store</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The Kubernetes job uses the <code>ghcr.io/kanisterio/kanister-tools</code> image, since it includes all the tools required to delete the artifact from an object store.</p></div><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">LocationDelete</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">LocationDeleteFromObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    artifact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3://bucket/path/artifact</span></span></code></pre></div><h3 id="createvolumesnapshot" tabindex="-1">CreateVolumeSnapshot <a class="header-anchor" href="#createvolumesnapshot" aria-label="Permalink to &quot;CreateVolumeSnapshot&quot;">​</a></h3><p>This function is used to create snapshots of one or more PVCs associated with an application. It takes individual snapshot of each PVC which can be then restored later. It generates an output that contains the Snapshot info required for restoring PVCs.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>Currently we only support PVC snapshots on AWS EBS. Support for more storage providers is coming soon!</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>pvcs</td><td style="text-align:center;">No</td><td>[]string</td><td>list of names of PVCs to be backed up</td></tr><tr><td>skipWait</td><td style="text-align:center;">No</td><td>bool</td><td>initiate but do not wait for the snapshot operation to complete</td></tr></tbody></table><p>When no PVCs are specified in the <code>pvcs</code> argument above, all PVCs in use by a Deployment or StatefulSet will be backed up.</p><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>volumeSnapshotInfo</td><td>string</td><td>Snapshot info required while restoring the PVCs</td></tr></tbody></table><p>Example:</p><p>Consider a scenario where you wish to backup all PVCs of a deployment. The output of this phase is saved to an Artifact named <code>backupInfo</code>, shown below:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          manifest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.backupVolume.Output.volumeSnapshotInfo }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CreateVolumeSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backupVolume</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span></code></pre></div><h3 id="waitforsnapshotcompletion" tabindex="-1">WaitForSnapshotCompletion <a class="header-anchor" href="#waitforsnapshotcompletion" aria-label="Permalink to &quot;WaitForSnapshotCompletion&quot;">​</a></h3><p>This function is used to wait for completion of snapshot operations initiated using the <a href="#createvolumesnapshot">CreateVolumeSnapshot</a> function. function.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>snapshots</td><td style="text-align:center;">Yes</td><td>string</td><td>snapshot info generated as output in CreateVolumeSnapshot function</td></tr></tbody></table><h3 id="createvolumefromsnapshot" tabindex="-1">CreateVolumeFromSnapshot <a class="header-anchor" href="#createvolumefromsnapshot" aria-label="Permalink to &quot;CreateVolumeFromSnapshot&quot;">​</a></h3><p>This function is used to restore one or more PVCs of an application from the snapshots taken using the <code>createvolumesnapshot</code>{.interpreted-text role=&quot;ref&quot;} function. It deletes old PVCs, if present and creates new PVCs from the snapshots taken earlier.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>snapshots</td><td style="text-align:center;">Yes</td><td>string</td><td>snapshot info generated as output in CreateVolumeSnapshot function</td></tr></tbody></table><p>Example:</p><p>Consider a scenario where you wish to restore all PVCs of a deployment. We will first scale down the application, restore PVCs and then scale up. For this phase, we will make use of the backupInfo Artifact provided by the <a href="#createvolumesnapshot">CreateVolumeSnapshot</a> function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ScaleWorkload</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shutdownPod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CreateVolumeFromSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">restoreVolume</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.manifest }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ScaleWorkload</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bringupPod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span></code></pre></div><h3 id="deletevolumesnapshot" tabindex="-1">DeleteVolumeSnapshot <a class="header-anchor" href="#deletevolumesnapshot" aria-label="Permalink to &quot;DeleteVolumeSnapshot&quot;">​</a></h3><p>This function is used to delete snapshots of PVCs taken using the <a href="#createvolumesnapshot">CreateVolumeSnapshot</a> function.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>snapshots</td><td style="text-align:center;">Yes</td><td>string</td><td>snapshot info generated as output in CreateVolumeSnapshot function</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteVolumeSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deleteVolumeSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.manifest }}&quot;</span></span></code></pre></div><h3 id="backupdatastats" tabindex="-1">BackupDataStats <a class="header-anchor" href="#backupdatastats" aria-label="Permalink to &quot;BackupDataStats&quot;">​</a></h3><p>This function get stats for the backed up data from the object store location</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is important that the application includes a <code>kanister-tools</code> sidecar container. This sidecar is necessary to run the tools that get the information from the object store.</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">Yes</td><td>string</td><td>path to the object store location</td></tr><tr><td>backupID</td><td style="text-align:center;">Yes</td><td>string</td><td>unique snapshot id generated during backup</td></tr><tr><td>mode</td><td style="text-align:center;">No</td><td>string</td><td>mode in which stats are expected</td></tr><tr><td>encryptionKey</td><td style="text-align:center;">No</td><td>string</td><td>encryption key to be used for backups</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>mode</td><td>string</td><td>mode of the output stats</td></tr><tr><td>fileCount</td><td>string</td><td>number of files in backup</td></tr><tr><td>size</td><td>string</td><td>size of the number of files in backup</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backupStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.BackupDataStatsFromObjectStore.Output.mode }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          fileCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.BackupDataStatsFromObjectStore.Output.fileCount }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.BackupDataStatsFromObjectStore.Output.size }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupDataStats</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupDataStatsFromObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s3-bucket/path/artifactPrefix</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">restore-size</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshot.KeyValue.backupIdentifier }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="createrdssnapshot" tabindex="-1">CreateRDSSnapshot <a class="header-anchor" href="#createrdssnapshot" aria-label="Permalink to &quot;CreateRDSSnapshot&quot;">​</a></h3><p>This function creates RDS snapshot of running RDS instance.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instanceID</td><td style="text-align:center;">Yes</td><td>string</td><td>ID of RDS instance you want to create snapshot of</td></tr><tr><td>dbEngine</td><td style="text-align:center;">No</td><td>string</td><td>Required in case of RDS Aurora instance. Supported DB Engines: <code>aurora</code> <code>aurora-mysql</code> and <code>aurora-postgresql</code></td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>snapshotID</td><td>string</td><td>ID of the RDS snapshot that has been created</td></tr><tr><td>instanceID</td><td>string</td><td>ID of the RDS instance</td></tr><tr><td>securityGroupID</td><td>[]string</td><td>AWS Security Group IDs associated with the RDS instance</td></tr><tr><td>allocatedStorage</td><td>string</td><td>Specifies the allocated storage size in gibibytes (GiB)</td></tr><tr><td>dbSubnetGroup</td><td>string</td><td>Specifies the DB Subnet group associated with the RDS instance</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          snapshotID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.snapshotID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          instanceID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.instanceID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          securityGroupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.securityGroupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          allocatedStorage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.allocatedStorage }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          dbSubnetGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.dbSubnetGroup }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    configMapNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dbconfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CreateRDSSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">createSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        instanceID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .ConfigMaps.dbconfig.Data &quot;postgres.instanceid&quot; }}&#39;</span></span></code></pre></div><h3 id="exportrdssnapshottolocation" tabindex="-1">ExportRDSSnapshotToLocation <a class="header-anchor" href="#exportrdssnapshottolocation" aria-label="Permalink to &quot;ExportRDSSnapshotToLocation&quot;">​</a></h3><p>This function spins up a temporary RDS instance from the given snapshot, extracts database dump and uploads that dump to the configured object storage.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instanceID</td><td style="text-align:center;">Yes</td><td>string</td><td>RDS db instance ID</td></tr><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute the Kanister tools pod for this function</td></tr><tr><td>snapshotID</td><td style="text-align:center;">Yes</td><td>string</td><td>ID of the RDS snapshot</td></tr><tr><td>dbEngine</td><td style="text-align:center;">Yes</td><td>string</td><td>one of the RDS db engines. Supported engine(s): <code>PostgreSQL</code></td></tr><tr><td>username</td><td style="text-align:center;">No</td><td>string</td><td>username of the RDS database instance</td></tr><tr><td>password</td><td style="text-align:center;">No</td><td>string</td><td>password of the RDS database instance</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">No</td><td>string</td><td>path to store the backup on the object store</td></tr><tr><td>databases</td><td style="text-align:center;">No</td><td>[]string</td><td>list of databases to take backup of</td></tr><tr><td>securityGroupID</td><td style="text-align:center;">No</td><td>[]string</td><td>list of <code>securityGroupID</code> to be passed to temporary RDS instance</td></tr><tr><td>dbSubnetGroup</td><td style="text-align:center;">No</td><td>string</td><td>DB Subnet Group to be passed to temporary RDS instance</td></tr><tr><td>image</td><td style="text-align:center;">No</td><td>string</td><td>kanister-tools image to be used for running export job</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>- If <code>databases</code> argument is not set, backup of all the databases will be taken. - If <code>securityGroupID</code> argument is not set, <code>ExportRDSSnapshotToLocation</code> will find out Security Group IDs associated with instance with <code>instanceID</code> and will pass the same. - If <code>backupArtifactPrefix</code> argument is not set, <code>instanceID</code> will be used as <em>backupArtifactPrefix</em>. - If <code>dbSubnetGroup</code> argument is not set, <code>default</code> DB Subnet group will be used.</p></div><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>snapshotID</td><td>string</td><td>ID of the RDS snapshot that has been created</td></tr><tr><td>instanceID</td><td>string</td><td>ID of the RDS instance</td></tr><tr><td>backupID</td><td>string</td><td>unique backup id generated during storing data into object storage</td></tr><tr><td>securityGroupID</td><td>[]string</td><td>AWS Security Group IDs associated with the RDS instance</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          snapshotID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.snapshotID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          instanceID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.instanceID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          securityGroupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.securityGroupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          backupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.exportSnapshot.Output.backupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          dbSubnetGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.dbSubnetGroup }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    configMapNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dbconfig</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CreateRDSSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">createSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        instanceID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .ConfigMaps.dbconfig.Data &quot;postgres.instanceid&quot; }}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ExportRDSSnapshotToLocation</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">exportSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      objects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dbsecret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Secret</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .ConfigMaps.dbconfig.Data &quot;postgres.secret&quot; }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        instanceID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.instanceID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        securityGroupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.securityGroupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .Phases.exportSnapshot.Secrets.dbsecret.Data &quot;username&quot; | toString }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .Phases.exportSnapshot.Secrets.dbsecret.Data &quot;password&quot; | toString }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dbEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PostgreSQL&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        databases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .ConfigMaps.dbconfig.Data &quot;postgres.databases&quot; }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        snapshotID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.snapshotID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test-postgresql-instance/postgres</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dbSubnetGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createSnapshot.Output.dbSubnetGroup }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="restorerdssnapshot" tabindex="-1">RestoreRDSSnapshot <a class="header-anchor" href="#restorerdssnapshot" aria-label="Permalink to &quot;RestoreRDSSnapshot&quot;">​</a></h3><p>This function restores the RDS DB instance either from an RDS snapshot or from the data dump (if [snapshotID] is not set) that is stored in an object storage.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>- If [snapshotID] is set, the function will restore RDS instance from the RDS snapshot. Otherwise <em>backupID</em> needs to be set to restore the RDS instance from data dump. - While restoring the data from RDS snapshot if RDS instance (where we have to restore the data) doesn&#39;t exist, the RDS instance will be created. But if the data is being restored from the Object Storage (data dump) and the RDS instance doesn&#39;t exist new RDS instance will not be created and will result in an error.</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>instanceID</td><td style="text-align:center;">Yes</td><td>string</td><td>RDS db instance ID</td></tr><tr><td>snapshotID</td><td style="text-align:center;">No</td><td>string</td><td>ID of the RDS snapshot</td></tr><tr><td>username</td><td style="text-align:center;">No</td><td>string</td><td>username of the RDS database instance</td></tr><tr><td>password</td><td style="text-align:center;">No</td><td>string</td><td>password of the RDS database instance</td></tr><tr><td>backupArtifactPrefix</td><td style="text-align:center;">No</td><td>string</td><td>path to store the backup on the object store</td></tr><tr><td>backupID</td><td style="text-align:center;">No</td><td>string</td><td>unique backup id generated during storing data into object storage</td></tr><tr><td>securityGroupID</td><td style="text-align:center;">No</td><td>[]string</td><td>list of <code>securityGroupID</code> to be passed to restored RDS instance</td></tr><tr><td>namespace</td><td style="text-align:center;">No</td><td>string</td><td>namespace in which to execute. Required if <code>snapshotID</code> is nil</td></tr><tr><td>dbEngine</td><td style="text-align:center;">No</td><td>string</td><td>one of the RDS db engines. Supported engines: <code>PostgreSQL</code>, <code>aurora</code>, <code>aurora-mysql</code> and <code>aurora-postgresql</code>. Required if <code>snapshotID</code> is nil or Aurora is run in RDS instance</td></tr><tr><td>dbSubnetGroup</td><td style="text-align:center;">No</td><td>string</td><td>DB Subnet Group to be passed to restored RDS instance</td></tr><tr><td>image</td><td style="text-align:center;">No</td><td>string</td><td>kanister-tools image to be used for running restore, only relevant when restoring from data dump (if <code>snapshotID</code> is empty)</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>- If <code>snapshotID</code> is not set, restore will be done from data dump. In that case <code>backupID</code> [arg] is required. - If <code>securityGroupID</code> argument is not set, <code>RestoreRDSSnapshot</code> will find out Security Group IDs associated with instance with <code>instanceID</code> and will pass the same. - If <code>dbSubnetGroup</code> argument is not set, <code>default</code> DB Subnet group will be used.</p></div><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>endpoint</td><td>string</td><td>endpoint of the RDS instance</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">restore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  inputArtifactNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backupInfo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Namespace</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">RestoreRDSSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">restoreSnapshots</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    objects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dbsecret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Secret</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .ConfigMaps.dbconfig.Data &quot;postgres.secret&quot; }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupArtifactPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test-postgresql-instance/postgres</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      instanceID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.instanceID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      backupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.backupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      securityGroupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.securityGroupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .Phases.restoreSnapshots.Secrets.dbsecret.Data &quot;username&quot; | toString }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ index .Phases.restoreSnapshots.Secrets.dbsecret.Data &quot;password&quot; | toString }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dbEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PostgreSQL&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dbSubnetGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.dbSubnetGroup }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="deleterdssnapshot" tabindex="-1">DeleteRDSSnapshot <a class="header-anchor" href="#deleterdssnapshot" aria-label="Permalink to &quot;DeleteRDSSnapshot&quot;">​</a></h3><p>This function deletes the RDS snapshot by the [snapshotID].</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>snapshotID</td><td style="text-align:center;">No</td><td>string</td><td>ID of the RDS snapshot</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Namespace</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  inputArtifactNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backupInfo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteRDSSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deleteSnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      snapshotID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupInfo.KeyValue.snapshotID }}&quot;</span></span></code></pre></div><h3 id="kubeops" tabindex="-1">KubeOps <a class="header-anchor" href="#kubeops" aria-label="Permalink to &quot;KubeOps&quot;">​</a></h3><p>This function is used to create or delete Kubernetes resources.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>operation</td><td style="text-align:center;">Yes</td><td>string</td><td><code>create</code> or <code>delete</code> Kubernetes resource</td></tr><tr><td>namespace</td><td style="text-align:center;">No</td><td>string</td><td>namespace in which the operation is executed</td></tr><tr><td>spec</td><td style="text-align:center;">No</td><td>string</td><td>resource spec that needs to be created</td></tr><tr><td>objectReference</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>object reference for delete operation</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">KubeOps</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">createDeploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    operation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|-</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      apiVersion: apps/v1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      kind: Deployment</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      metadata:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        name: &quot;{{ .Deployment.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      spec:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        replicas: 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        selector:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          matchLabels:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            app: example</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        template:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          metadata:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            labels:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              app: example</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          spec:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            containers:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            - image: busybox</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              imagePullPolicy: IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              name: container</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              ports:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              - containerPort: 80</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                name: http</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                protocol: TCP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">KubeOps</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deleteDeploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    operation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">delete</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    objectReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createDeploy.Output.apiVersion }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createDeploy.Output.group }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createDeploy.Output.resource }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createDeploy.Output.name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createDeploy.Output.namespace }}&quot;</span></span></code></pre></div><h3 id="waitv2" tabindex="-1">WaitV2 <a class="header-anchor" href="#waitv2" aria-label="Permalink to &quot;WaitV2&quot;">​</a></h3><p>This function is used to wait on a Kubernetes resource until a desired state is reached. The wait condition is defined in a Go template syntax.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>timeout</td><td style="text-align:center;">Yes</td><td>string</td><td>wait timeout</td></tr><tr><td>conditions</td><td style="text-align:center;">Yes</td><td>map[string]interface{}</td><td>keys should be <code>allOf</code> and/or <code>anyOf</code> with value as <code>[]Condition</code></td></tr></tbody></table><p><code>Condition</code> struct:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Go template condition that returns true or false&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">objectReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Kubernetes resource API version&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Type of resource to wait for&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Name of the resource&quot;</span></span></code></pre></div><p>The Go template conditions can be validated using kubectl commands with <code>-o go-template</code> flag. E.g. To check if the Deployment is ready, the following Go template syntax can be used with kubectl command</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get deploy -n </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$NAMESPACE $DEPLOY_NAME </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-template=&#39;{{ $available := false }}{{ range $condition := $.status.conditions }}{{ if and (eq .type &quot;Available&quot;) (eq .status &quot;True&quot;)  }}{{ $available = true }}{{ end }}{{ end }}{{ $available }}&#39;</span></span></code></pre></div><p>The same Go template can be used as a condition in the WaitV2 function.</p><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">WaitV2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">waitForDeploymentReady</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5m</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    conditions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      anyOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ $available := false }}{{ range $condition := $.status.conditions }}{{ if and (eq .type &quot;Available&quot;) (eq .status &quot;True&quot;) }}{{ $available = true }}{{ end }}{{ end }}{{ $available }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        objectReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;v1&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;apps&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Object.metadata.name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Object.metadata.namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;deployments&quot;</span></span></code></pre></div><h3 id="wait-deprecated" tabindex="-1">Wait (deprecated) <a class="header-anchor" href="#wait-deprecated" aria-label="Permalink to &quot;Wait (deprecated)&quot;">​</a></h3><p>This function is used to wait on a Kubernetes resource until a desired state is reached.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>timeout</td><td style="text-align:center;">Yes</td><td>string</td><td>wait timeout</td></tr><tr><td>conditions</td><td style="text-align:center;">Yes</td><td>map[string]interface{}</td><td>keys should be <code>allOf</code> and/or <code>anyOf</code> with value as <code>[]Condition</code></td></tr></tbody></table><p><code>Condition</code> struct:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Go template condition that returns true or false&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">objectReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Kubernetes resource API version&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Type of resource to wait for&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Name of the resource&quot;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>We can refer to the object key-value in Go template condition with the help of a <code>$</code> prefix JSON-path syntax.</p></div><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Wait</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">waitNsReady</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60s</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    conditions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      allOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ if (eq &quot;{ $.status.phase }&quot; &quot;Invalid&quot;)}}true{{ else }}false{{ end }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          objectReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">namespaces</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{ if (eq &quot;{ $.status.phase }&quot; &quot;Active&quot;)}}true{{ else }}false{{ end }}&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          objectReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">namespaces</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Namespace.Name }}&quot;</span></span></code></pre></div><h3 id="createcsisnapshot" tabindex="-1">CreateCSISnapshot <a class="header-anchor" href="#createcsisnapshot" aria-label="Permalink to &quot;CreateCSISnapshot&quot;">​</a></h3><p>This function is used to create CSI VolumeSnapshot for a PersistentVolumeClaim. By default, it waits for the VolumeSnapshot to be <code>ReadyToUse</code>.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td style="text-align:center;">No</td><td>string</td><td>name of the VolumeSnapshot. Default value is <code>&lt;pvc&gt;-snapshot-&lt;random-alphanumeric-suffix&gt;</code></td></tr><tr><td>pvc</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the PersistentVolumeClaim to be captured</td></tr><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace of the PersistentVolumeClaim and resultant VolumeSnapshot</td></tr><tr><td>snapshotClass</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the VolumeSnapshotClass</td></tr><tr><td>labels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>labels for the VolumeSnapshot</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>name of the CSI VolumeSnapshot</td></tr><tr><td>pvc</td><td>string</td><td>name of the captured PVC</td></tr><tr><td>namespace</td><td>string</td><td>namespace of the captured PVC and VolumeSnapshot</td></tr><tr><td>restoreSize</td><td>string</td><td>required memory size to restore PVC</td></tr><tr><td>snapshotContent</td><td>string</td><td>name of the VolumeSnapshotContent</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      snapshotInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createCSISnapshot.Output.name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          pvc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createCSISnapshot.Output.pvc }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createCSISnapshot.Output.namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          restoreSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createCSISnapshot.Output.restoreSize }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          snapshotContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.createCSISnapshot.Output.snapshotContent }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CreateCSISnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">createCSISnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        pvc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .PVC.Name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .PVC.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        snapshotClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">do-block-storage</span></span></code></pre></div><h3 id="createcsisnapshotstatic" tabindex="-1">CreateCSISnapshotStatic <a class="header-anchor" href="#createcsisnapshotstatic" aria-label="Permalink to &quot;CreateCSISnapshotStatic&quot;">​</a></h3><p>This function creates a pair of CSI <code>VolumeSnapshot</code> and <code>VolumeSnapshotContent</code> resources, assuming that the underlying <em>real</em> storage volume snapshot already exists. The deletion behavior is defined by the <code>deletionPolicy</code> property (<code>Retain</code>, <code>Delete</code>) of the snapshot class.</p><p>For more information on pre-provisioned volume snapshots and snapshot deletion policy, see the Kubernetes <a href="https://kubernetes.io/docs/concepts/storage/volume-snapshots/" target="_blank" rel="noreferrer">documentation</a>.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the new CSI <code>VolumeSnapshot</code></td></tr><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace of the new CSI <code>VolumeSnapshot</code></td></tr><tr><td>driver</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the CSI driver for the new CSI <code>VolumeSnapshotContent</code></td></tr><tr><td>handle</td><td style="text-align:center;">Yes</td><td>string</td><td>unique identifier of the volume snapshot created on the storage backend used as the source of the new <code>VolumeSnapshotContent</code></td></tr><tr><td>snapshotClass</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the <code>VolumeSnapshotClass</code> to use</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>name of the new CSI <code>VolumeSnapshot</code></td></tr><tr><td>namespace</td><td>string</td><td>namespace of the new CSI <code>VolumeSnapshot</code></td></tr><tr><td>restoreSize</td><td>string</td><td>required memory size to restore the volume</td></tr><tr><td>snapshotContent</td><td>string</td><td>name of the new CSI <code>VolumeSnapshotContent</code></td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  createStaticSnapshot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CreateCSISnapshotStatic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">createCSISnapshotStatic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">volume-snapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        snapshotClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">csi-hostpath-snapclass</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hostpath.csi.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7bdd0de3-aaeb-11e8-9aae-0242ac110002</span></span></code></pre></div><h3 id="restorecsisnapshot" tabindex="-1">RestoreCSISnapshot <a class="header-anchor" href="#restorecsisnapshot" aria-label="Permalink to &quot;RestoreCSISnapshot&quot;">​</a></h3><p>This function restores a new PersistentVolumeClaim using CSI VolumeSnapshot.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the VolumeSnapshot</td></tr><tr><td>pvc</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the new PVC</td></tr><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace of the VolumeSnapshot and resultant PersistentVolumeClaim</td></tr><tr><td>storageClass</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the StorageClass</td></tr><tr><td>restoreSize</td><td style="text-align:center;">Yes</td><td>string</td><td>required memory size to restore PVC. Must be greater than zero</td></tr><tr><td>accessModes</td><td style="text-align:center;">No</td><td>[]string</td><td>access modes for the underlying PV (Default is <code>[&quot;ReadWriteOnce&quot;]</code>)</td></tr><tr><td>volumeMode</td><td style="text-align:center;">No</td><td>string</td><td>mode of volume (Default is <code>&quot;Filesystem&quot;</code>)</td></tr><tr><td>labels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>optional labels for the PersistentVolumeClaim</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>Output artifact <code>snapshotInfo</code> from <code>CreateCSISnapshot</code> function can be used as an input artifact in this function.</p></div><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  restore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    inputArtifactNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">snapshotInfo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">RestoreCSISnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">restoreCSISnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshotInfo.KeyValue.name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        pvc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshotInfo.KeyValue.pvc }}-restored&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshotInfo.KeyValue.namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        storageClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">do-block-storage</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        restoreSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshotInfo.KeyValue.restoreSize }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        accessModes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ReadWriteOnce&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        volumeMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Filesystem&quot;</span></span></code></pre></div><h3 id="deletecsisnapshot" tabindex="-1">DeleteCSISnapshot <a class="header-anchor" href="#deletecsisnapshot" aria-label="Permalink to &quot;DeleteCSISnapshot&quot;">​</a></h3><p>This function deletes a VolumeSnapshot from given namespace.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the VolumeSnapshot</td></tr><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace of the VolumeSnapshot</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>Output artifact <code>snapshotInfo</code> from <code>CreateCSISnapshot</code> function can be used as an input artifact in this function.</p></div><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    inputArtifactNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">snapshotInfo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteCSISnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deleteCSISnapshot</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshotInfo.KeyValue.name }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.snapshotInfo.KeyValue.namespace }}&quot;</span></span></code></pre></div><h3 id="deletecsisnapshotcontent" tabindex="-1">DeleteCSISnapshotContent <a class="header-anchor" href="#deletecsisnapshotcontent" aria-label="Permalink to &quot;DeleteCSISnapshotContent&quot;">​</a></h3><p>This function deletes an unbounded <code>VolumeSnapshotContent</code> resource. It has no effect on bounded <code>VolumeSnapshotContent</code> resources, as they would be protected by the CSI controller.</p><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the <code>VolumeSnapshotContent</code></td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deleteVSC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteCSISnapshotContent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deleteCSISnapshotContent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test-snapshot-content-content-dfc8fa67-8b11-4fdf-bf94-928589c2eed8&quot;</span></span></code></pre></div><h3 id="backupdatausingkopiaserver" tabindex="-1">BackupDataUsingKopiaServer <a class="header-anchor" href="#backupdatausingkopiaserver" aria-label="Permalink to &quot;BackupDataUsingKopiaServer&quot;">​</a></h3><p>This function backs up data from a container into any object store supported by Kanister using Kopia Repository Server as data mover.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is important that the application includes a <code>kanister-tools</code> sidecar container. This sidecar is necessary to run the tools that back up the volume and store it on the object store.</p><p>Additionally, in order to use this function, a RepositoryServer CR is needed while creating the <a href="./architecture.html#actionsets">ActionSets</a>.</p></div><p>Arguments:</p><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace of the container that you want to backup the data of</td></tr><tr><td>pod</td><td style="text-align:center;">Yes</td><td>string</td><td>pod name of the container that you want to backup the data of</td></tr><tr><td>container</td><td style="text-align:center;">Yes</td><td>string</td><td>name of the kanister sidecar container</td></tr><tr><td>includePath</td><td style="text-align:center;">Yes</td><td>string</td><td>path of the data to be backed up</td></tr><tr><td>snapshotTags</td><td style="text-align:center;">No</td><td>string</td><td>custom tags to be provided to the kopia snapshots</td></tr><tr><td>repositoryServerUserHostname</td><td style="text-align:center;">No</td><td>string</td><td>user&#39;s hostname to access the kopia repository server. Hostname would be available in the user access credential secret</td></tr></tbody></table><p>Outputs:</p><table><thead><tr><th>Output</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>backupID</td><td>string</td><td>unique snapshot id generated during backup</td></tr><tr><td>size</td><td>string</td><td>size of the backup</td></tr><tr><td>phySize</td><td>string</td><td>physical size of the backup</td></tr></tbody></table><p>Example:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">actions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  outputArtifacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    backupIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      keyValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Phases.backupToS3.Output.backupID }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  phases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BackupDataUsingKopiaServer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backupToS3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      pod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ index .Deployment.Pods 0 }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kanister-tools</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      includePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/mnt/data</span></span></code></pre></div><h3 id="restoredatausingkopiaserver" tabindex="-1">RestoreDataUsingKopiaServer <a class="header-anchor" href="#restoredatausingkopiaserver" aria-label="Permalink to &quot;RestoreDataUsingKopiaServer&quot;">​</a></h3><p>This function restores data backed up by the <code>BackupDataUsingKopiaServer</code> function. It creates a new Pod that mounts the PVCs referenced by the Pod specified in the function argument and restores data to the specified path.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>It is extremely important that, the PVCs are not currently in use by an active application container, as they are required to be mounted to the new Pod (ensure by using <code>ScaleWorkload</code> with replicas=0 first). For advanced use cases, it is possible to have concurrent access but the PV needs to have <code>RWX</code> access mode and the volume needs to use a clustered file system that supports concurrent access.</p></div><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace of the application that you want to restore the data in</td></tr><tr><td>image</td><td style="text-align:center;">Yes</td><td>string</td><td>image to be used for running restore job (should contain kopia binary)</td></tr><tr><td>backupIdentifier</td><td style="text-align:center;">Yes</td><td>string</td><td>unique snapshot id generated during backup</td></tr><tr><td>restorePath</td><td style="text-align:center;">Yes</td><td>string</td><td>path where data to be restored</td></tr><tr><td>pod</td><td style="text-align:center;">No</td><td>string</td><td>pod to which the volumes are attached</td></tr><tr><td>volumes</td><td style="text-align:center;">No</td><td>map[string]string</td><td>mapping of [pvcName] to [mountPath] under which the volume will be available</td></tr><tr><td>podOverride</td><td style="text-align:center;">No</td><td>map[string]interface{}</td><td>specs to override default pod specs with</td></tr><tr><td>repositoryServerUserHostname</td><td style="text-align:center;">No</td><td>string</td><td>user&#39;s hostname to access the kopia repository server. Hostname would be available in the user access credential secret</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The <code>image</code> argument requires the use of <code>ghcr.io/kanisterio/kanister-tools</code> image since it includes the required tools to restore data from the object store.</p><p>Either <code>pod</code> or the <code>volumes</code> arguments must be specified to this function based on the function that was used to backup the data. If [BackupDataUsingKopiaServer] is used to backup the data we should specify <em>pod</em> and for [CopyVolumeDataUsingKopiaServer], <em>volumes</em> should be specified.</p><p>Additionally, in order to use this function, a RepositoryServer CR is required.</p></div><p>Example:</p><p>Consider a scenario where you wish to restore the data backed up by the <a href="#backupdatausingkopiaserver">BackupDataUsingKopiaServer</a> function. We will first scale down the application, restore the data and then scale it back up. For this phase, we will use the <code>backupIdentifier</code> Artifact provided by backup function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ScaleWorkload name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">shutdownPod args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Name }}\&quot; kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    Deployment replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">RestoreDataUsingKopiaServer name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">restoreFromS3 args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Namespace }}\&quot; pod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{ index</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Pods 0 }}\&quot; backupIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .ArtifactsIn.backupIdentifier.KeyValue.id }}\&quot; restorePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    /mnt/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ScaleWorkload name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bringupPod args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\&quot;{{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    .Deployment.Namespace }}\&quot; name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">\&quot;{{ .Deployment.Name }}\&quot; kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    Deployment replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span></code></pre></div><h3 id="deletedatausingkopiaserver" tabindex="-1">DeleteDataUsingKopiaServer <a class="header-anchor" href="#deletedatausingkopiaserver" aria-label="Permalink to &quot;DeleteDataUsingKopiaServer&quot;">​</a></h3><p>This function deletes the snapshot data backed up by the <code>BackupDataUsingKopiaServer</code> function. It creates a new Pod that runs <code>delete snapshot</code> command.</p><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>The <code>image</code> argument requires the use of <code>ghcr.io/kanisterio/kanister-tools</code> image since it includes the required tools to delete snapshot from the object store.</p><p>Additionally, in order to use this function, a RepositoryServer CR is required.</p></div><table><thead><tr><th>Argument</th><th style="text-align:center;">Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>namespace</td><td style="text-align:center;">Yes</td><td>string</td><td>namespace in which to execute the delete job</td></tr><tr><td>backupID</td><td style="text-align:center;">Yes</td><td>string</td><td>unique snapshot id generated during backup</td></tr><tr><td>image</td><td style="text-align:center;">Yes</td><td>string</td><td>image to be used for running delete job (should contain kopia binary)</td></tr><tr><td>repositoryServerUserHostname</td><td style="text-align:center;">No</td><td>string</td><td>user&#39;s hostname to access the kopia repository server. Hostname would be available in the user access credential secret</td></tr><tr><td>podAnnotations</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom annotations for the temporary pod that gets created</td></tr><tr><td>podLabels</td><td style="text-align:center;">No</td><td>map[string]string</td><td>custom labels for the temporary pod that gets created</td></tr></tbody></table><p>Example:</p><p>Consider a scenario where you wish to delete the data backed up by the <a href="#backupdatausingkopiaserver">BackupDataUsingKopiaServer</a> function. For this phase, we will use the <code>backupIdentifier</code> Artifact provided by backup function.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteDataUsingKopiaServer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DeleteFromObjectStore</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .Deployment.Namespace }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    backupID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ .ArtifactsIn.backupIdentifier.KeyValue.id }}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ghcr.io/kanisterio/kanister-tools:0.89.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podAnnotations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      annKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">annValue</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    podLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labelKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelValue</span></span></code></pre></div><h3 id="registering-functions" tabindex="-1">Registering Functions <a class="header-anchor" href="#registering-functions" aria-label="Permalink to &quot;Registering Functions&quot;">​</a></h3><p>Kanister can be extended by registering new Kanister Functions.</p><p>Kanister Functions are registered using a similar mechanism to <a href="https://golang.org/pkg/database/sql/" target="_blank" rel="noreferrer">database/sql</a> drivers. To register new Kanister Functions, import a package with those new functions into the controller and recompile it. --&gt;</p></div></div></main><footer class="VPDocFooter" data-v-52e7dc14 data-v-19bb8e58><!--[--><!--]--><!----><nav class="prev-next" data-v-19bb8e58><div class="pager" data-v-19bb8e58><a class="VPLink link pager-link prev" href="/tooling.html" data-v-19bb8e58><!--[--><span class="desc" data-v-19bb8e58>Previous page</span><span class="title" data-v-19bb8e58>Tooling</span><!--]--></a></div><div class="pager" data-v-19bb8e58><a class="VPLink link pager-link next" href="/templates.html" data-v-19bb8e58><!--[--><span class="desc" data-v-19bb8e58>Next page</span><span class="title" data-v-19bb8e58>Template Parameters</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-be30fe8f data-v-409613f4><div class="container" data-v-409613f4><!----><p class="copyright" data-v-409613f4>© Copyright 2017-2024, Kanister</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"CtAxarfg\",\"markdown-examples.md\":\"B63R-fuG\",\"architecture.md\":\"BazSSXAL\",\"tasks_logs_labels.md\":\"B1ZW6kWM\",\"tasks_logs.md\":\"CFBbyKc9\",\"overview.md\":\"DbmCO5ia\",\"tasks_logs_level.md\":\"B71C7MDg\",\"tasks_argo.md\":\"C9SOqlY0\",\"install.md\":\"CwXF_uJn\",\"tasks_scaleworkload.md\":\"oD0RSY4I\",\"index.md\":\"8XZV3Nif\",\"tooling.md\":\"DyPR3V6Z\",\"troubleshooting.md\":\"D3x6nwKE\",\"templates.md\":\"Bj0nLwI9\",\"functions.md\":\"BkCdMtsG\",\"tutorial.md\":\"DBpy2MFy\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Kanister\",\"description\":\"Application-Specific Data Management\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"kanister.svg\",\"search\":{\"provider\":\"local\"},\"outline\":[2,3],\"footer\":{\"copyright\":\"© Copyright 2017-2024, Kanister\"},\"nav\":[{\"text\":\"0.110.0\",\"link\":\"\"}],\"sidebar\":[{\"text\":\"Overview\",\"link\":\"/overview\"},{\"text\":\"Installation\",\"link\":\"/install\"},{\"text\":\"Tutorial\",\"link\":\"/tutorial\"},{\"text\":\"Architecture\",\"link\":\"/architecture\"},{\"text\":\"Tooling\",\"link\":\"/tooling\"},{\"text\":\"Functions\",\"link\":\"/functions\"},{\"text\":\"Template Parameters\",\"link\":\"/templates\"},{\"text\":\"Troubleshooting\",\"link\":\"/troubleshooting\"},{\"text\":\"Tasks\",\"items\":[{\"text\":\"Automating ActionSet Creation using Argo Cron Workflows\",\"link\":\"/tasks/argo\"},{\"text\":\"Segregate Controller And Datapath Logs\",\"link\":\"/tasks/logs\"},{\"text\":\"Modifying Kanister Log Level\",\"link\":\"/tasks/logs_level\"},{\"text\":\"Configuring logs for specific ActionSets\",\"link\":\"/tasks/logs_labels\"},{\"text\":\"Using ScaleWorkload function with output artifact\",\"link\":\"/tasks/scaleworkload\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/kanisterio/kanister\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>